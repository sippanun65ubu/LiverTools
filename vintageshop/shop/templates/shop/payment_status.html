{% load cart_extras %}
<div class="payment-status-container">
    <h1 class="text-2xl font-semibold text-center">üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h1>

    {% if orders %}
        {% for order in orders %}
        <div class="order-box">
            <h2>üìÑ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
            <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</strong> {{ order.created_at }}</p>        

            <!-- ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà-->
            {% if order.address_line %}
            <p><strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</strong> {{ order.address_line }} ({{ order.zip_code }})</p>
        {% endif %}
            <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå -->
            <table class="order-table">
                <thead>
                    <tr>
                        <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                        <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                        <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                        <th>‡∏£‡∏ß‡∏°</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.items.all %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td>{{ item.quantity }}</td>
                        <!-- If item stores price in item.price, use that. Otherwise, use item.product.price -->
                        <td>{{ item.price }} ‡∏ö‡∏≤‡∏ó</td>
                        <!-- Multiply quantity by price (assuming you have a custom multiply filter or do it in the view) -->
                        <td>{{ item.quantity|multiply:item.price }} ‡∏ö‡∏≤‡∏ó</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡πÉ‡∏ô model ‡∏´‡∏£‡∏∑‡∏≠ view, ‡πÉ‡∏ä‡πâ {{ order.total_price }} -->
            <!-- ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏î‡πâ‡∏ß‡∏¢ for-loop, up to your approach. -->
            <h3 class="total-price">
                üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:
                <strong>
                    {% if order.total_price %}
                        {{ order.total_price }} ‡∏ö‡∏≤‡∏ó
                    {% else %}
                        <!-- Fallback if you haven't implemented total_price on the model -->
                        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡πÉ‡∏ô view ‡∏´‡∏£‡∏∑‡∏≠ model property
                    {% endif %}
                </strong>
            </h3>
            <h2 class="text-xl font-semibold">üí≥ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
            {% if order.status == "waiting_confirm" %}
                <p class="status pending">‚è≥ ‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</p>
            {% elif order.status == "approved" %}
                <p class="status success">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</p>
            {% elif order.status == "rejected" %}
                <p class="status failed">‚ùå ‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</p>
            {% elif order.status == "completed" %}
                <p class="status success">üéâ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
            {% endif %}

            {% if order.payment_slip %}
                <h2 class="text-xl font-semibold">üìú ‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h2>
                <a href="{{ order.payment_slip.url }}" target="_blank">
                    <img src="{{ order.payment_slip.url }}" alt="‡∏™‡∏•‡∏¥‡∏õ" width="150">
                </a>
            {% else %}
                <p>‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏•‡∏¥‡∏õ</p>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
    {% endif %}

    <div class="shop-more-container">
        <a href="{% url 'product_list' %}" class="btn-shop-more">üõç ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠</a>
    </div>
</div>
