<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>

    <!-- jQuery (required by Select2) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Select2 CSS and JS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <style>
        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á UI */
        .select2-container {
            width: 100% !important;
        }
        .hidden {
            display: none;
        }
        .no-results {
            display: none;
            color: red;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Admin Dashboard</h1>

    <a href="{% url 'logout' %}"><button>Logout</button></a>
    <a href="{% url 'admin_chat' %}"><button>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó</button></a>
    <a href="{% url 'admin_order_list' %}"><button>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button></a>
    <a href="{% url 'admin_sales_report' %}"><button style="padding: 10px 20px; font-size: 16px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;"> üìä ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
        </button>
    </a>
    


    <h2>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    </form>

    <script>
        $(document).ready(function() {
            $('#id_category').select2({
                placeholder: 'Select categories',
                allowClear: true
            });
        });
    </script>

    <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>

    <!-- ‚úÖ ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <input type="text" id="searchBox" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..." style="width: 100%; padding: 10px; margin-bottom: 10px;">

    <!-- ‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <p id="noResults" class="no-results">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>

    <ul id="productList">
        {% for product in products %}
            <li class="product-item">
                <strong class="product-name">{{ product.name }}</strong> - ‡∏£‡∏≤‡∏Ñ‡∏≤: {{ product.price }} ‡∏ö‡∏≤‡∏ó
                <br>‡∏Ç‡∏ô‡∏≤‡∏î: {{ product.size }}
                <br>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà:
                {% if product.category.all %}
                    {% for cat in product.category.all %}
                        {{ cat.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà)
                {% endif %}
                <br>{{ product.description }}
                {% if product.image %}
                    <br><img src="{{ product.image.url }}" width="100">
                {% endif %}
                <br>
                <a href="{% url 'edit_product' product.id %}">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a> |
                <a href="{% url 'delete_product' product.id %}" onclick="return confirm('‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');">‡∏•‡∏ö</a>
            </li>
        {% endfor %}
    </ul>

    <script>
        $(document).ready(function() {
            $("#searchBox").on("keyup", function() {
                var searchText = $(this).val().toLowerCase().trim();
                var hasResults = false;

                $(".product-item").each(function() {
                    var itemName = $(this).find(".product-name").text().toLowerCase().trim();
                    if (itemName.includes(searchText)) {
                        $(this).show();
                        hasResults = true;
                    } else {
                        $(this).hide();
                    }
                });

                // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                if (hasResults) {
                    $("#noResults").hide();
                } else {
                    $("#noResults").show();
                }
            });
        });
    </script>
</body>
</html>
